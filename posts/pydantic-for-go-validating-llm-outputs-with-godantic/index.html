<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Pydantic for Go: Validating LLM Outputs with godantic | deepankar.log</title><meta name=keywords content="go,LLM,validation,godantic,openai,structured output"><meta name=description content="Schema generation and runtime validation for structured LLM outputs in Go, using godantic"><meta name=author content="Deepankar Mahapatro"><link rel=canonical href=https://deepankarm.github.io/posts/pydantic-for-go-validating-llm-outputs-with-godantic/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://deepankarm.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://deepankarm.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://deepankarm.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://deepankarm.github.io/apple-touch-icon.png><link rel=mask-icon href=https://deepankarm.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://deepankarm.github.io/posts/pydantic-for-go-validating-llm-outputs-with-godantic/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "09cbd7674917411283ca3c61ea31135d"}'></script><meta property="og:url" content="https://deepankarm.github.io/posts/pydantic-for-go-validating-llm-outputs-with-godantic/"><meta property="og:site_name" content="deepankar.log"><meta property="og:title" content="Pydantic for Go: Validating LLM Outputs with godantic"><meta property="og:description" content="Schema generation and runtime validation for structured LLM outputs in Go, using godantic"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-12T14:00:00+05:30"><meta property="article:modified_time" content="2026-01-12T14:00:00+05:30"><meta property="article:tag" content="go"><meta property="article:tag" content="LLM"><meta property="article:tag" content="validation"><meta property="article:tag" content="godantic"><meta property="article:tag" content="OpenAI"><meta property="article:tag" content="structured output"><meta name=twitter:card content="summary"><meta name=twitter:title content="Pydantic for Go: Validating LLM Outputs with godantic"><meta name=twitter:description content="Schema generation and runtime validation for structured LLM outputs in Go, using godantic"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"posts","item":"https://deepankarm.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Pydantic for Go: Validating LLM Outputs with godantic","item":"https://deepankarm.github.io/posts/pydantic-for-go-validating-llm-outputs-with-godantic/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Pydantic for Go: Validating LLM Outputs with godantic","name":"Pydantic for Go: Validating LLM Outputs with godantic","description":"Schema generation and runtime validation for structured LLM outputs in Go, using godantic","keywords":["go","LLM","validation","godantic","openai","structured output"],"articleBody":"The Problem LLMs hallucinate. They return wrong types, invalid values, and malformed data. A rating meant to be 1-5 comes back as 10. An email field contains “not provided”. A required field is missing entirely.\nIn Python, Pydantic is the standard solution - define a model, validate the output, catch errors before they crash your app. But what about Go?\nWhy Existing Go Libraries Don’t Cut It Go has validation libraries. It has JSON schema libraries. But none of them solve the LLM output problem end-to-end.\nStruct tag validators like go-playground/validator handle runtime validation, but through string-based struct tags (validate:\"required,email,min=1\"). These are invisible to your IDE, impossible to unit test in isolation, and don’t generate schemas. You validate after the fact but can’t tell the LLM what shape to produce.\nJSON schema libraries like invopop/jsonschema generate schemas from structs, but don’t validate. You can describe what you want, but can’t enforce it when the response arrives.\nThe missing piece is unification. Pydantic’s power comes from one model definition that drives schema generation and validation and serialization. Define Field(ge=1, le=5) once - Pydantic generates the JSON schema for your LLM API call, then validates the response against the same constraints. In Go, you’d need to wire together separate libraries, keep constraints in sync manually, and handle LLM-specific schema quirks (like flattening $refs for OpenAI) yourself.\nGo has no union types. LLM responses are often polymorphic - a tool call returns either a SuccessResponse or an ErrorResponse, an input is either TextInput or ImageInput. Python handles this naturally with Union[SuccessResponse, ErrorResponse] and Pydantic’s discriminated unions route to the right type based on a field value. Go’s type system has no equivalent. You end up with interface{} fields, manual type switches, or separate endpoints - none of which produce correct anyOf/oneOf JSON schemas for the LLM.\nThere’s also nothing in Go for parsing partial JSON from streaming LLM responses - a common need when building real-time UIs.\ngodantic godantic fills this gap. One struct definition with Field{Name}() methods gives you:\nRuntime validation with typed, testable constraints (no struct tags) JSON schema generation with LLM-specific transforms (TransformForOpenAI(), TransformForGemini()) Validated marshaling/unmarshaling in a single call Discriminated unions for polymorphic LLM responses Streaming partial JSON parsing for real-time output Lifecycle hooks (BeforeValidate, AfterValidate) for data transformation This post shows common patterns for validating LLM outputs with godantic.\nBasic Validation Define a struct and add Field{Name}() methods to specify constraints:\ntype ContactInfo struct { Name string `json:\"name\"` Email string `json:\"email\"` Phone string `json:\"phone\"` Company *string `json:\"company,omitempty\"` } func (c *ContactInfo) FieldName() godantic.FieldOptions[string] { return godantic.Field( godantic.Required[string](), godantic.MinLen(1), godantic.Description[string](\"Contact's full name\"), ) } func (c *ContactInfo) FieldEmail() godantic.FieldOptions[string] { return godantic.Field( godantic.Required[string](), godantic.Email(), // Built-in email validation godantic.Description[string](\"Contact's email address\"), ) } Validate LLM output:\nvalidator := godantic.NewValidator[ContactInfo]() contact, errs := validator.Unmarshal([]byte(llmResponse)) if len(errs) \u003e 0 { for _, e := range errs { fmt.Printf(\"%v: %s\\n\", e.Loc, e.Message) // [Email]: value does not match pattern ^[a-zA-Z0-9._%+-]+@... } } Numeric Constraints Constrain numeric values with Min, Max, ExclusiveMin, ExclusiveMax:\ntype ProductReview struct { ProductName string `json:\"product_name\"` Rating int `json:\"rating\"` Pros []string `json:\"pros\"` Cons []string `json:\"cons\"` Summary string `json:\"summary\"` } func (p *ProductReview) FieldRating() godantic.FieldOptions[int] { return godantic.Field( godantic.Required[int](), godantic.Min(1), godantic.Max(5), godantic.Description[int](\"Rating from 1 (worst) to 5 (best)\"), ) } func (p *ProductReview) FieldPros() godantic.FieldOptions[[]string] { return godantic.Field( godantic.Required[[]string](), godantic.MinItems[string](1), // At least one pro godantic.Description[[]string](\"List of positive aspects\"), ) } When the LLM returns \"rating\": 10:\n[Rating]: value must be \u003c= 5 Custom Validators Adding to our ContactInfo from earlier, custom validation logic with godantic.Validate():\nfunc (c *ContactInfo) FieldPhone() godantic.FieldOptions[string] { return godantic.Field( godantic.Required[string](), godantic.Validate(func(phone string) error { // Strip formatting: (555) 123-4567 -\u003e 5551234567 re := regexp.MustCompile(`\\D`) digits := re.ReplaceAllString(phone, \"\") if len(digits) \u003c 10 { return fmt.Errorf(\"phone must have at least 10 digits, got %d\", len(digits)) } return nil }), ) } Output:\n[Phone]: phone must have at least 10 digits, got 3 Nested Models Nested structs are validated automatically:\ntype Specification struct { Name string `json:\"name\"` Value string `json:\"value\"` } type Review struct { ReviewerName string `json:\"reviewer_name\"` Rating int `json:\"rating\"` Comment string `json:\"comment\"` } type Product struct { Name string `json:\"name\"` Price float64 `json:\"price\"` Specifications []Specification `json:\"specifications\"` Reviews []Review `json:\"reviews\"` } func (r *Review) FieldRating() godantic.FieldOptions[int] { return godantic.Field( godantic.Required[int](), godantic.Min(1), godantic.Max(5), ) } If a nested review has an invalid rating:\n[Reviews [0] Rating]: value must be \u003c= 5 Schema Generation for LLM APIs Generate JSON schemas for OpenAI, Gemini, or Anthropic structured outputs using godantic/schema:\nschemaGen := schema.NewGenerator[ProductReview]() flatSchema, err := schemaGen.GenerateFlattened() Output:\n{ \"type\": \"object\", \"properties\": { \"rating\": { \"type\": \"integer\", \"minimum\": 1, \"maximum\": 5, \"description\": \"Rating from 1 (worst) to 5 (best)\" }, \"pros\": { \"type\": \"array\", \"items\": {\"type\": \"string\"}, \"minItems\": 1, \"description\": \"List of positive aspects\" } }, \"required\": [\"product_name\", \"rating\", \"pros\", \"cons\", \"summary\"] } The same struct definition drives both validation and schema generation.\nOpenAI Structured Outputs Use the generated schema with OpenAI’s structured output API (using openai-go):\n// Generate schema schemaGen := schema.NewGenerator[ProductReview]() flatSchema, err := schemaGen.GenerateFlattened() // Call OpenAI with structured output completion, _ := client.Chat.Completions.New(ctx, openai.ChatCompletionNewParams{ Messages: []openai.ChatCompletionMessageParamUnion{ openai.SystemMessage(\"Extract a structured product review.\"), openai.UserMessage(reviewText), }, Model: openai.ChatModelGPT4o2024_08_06, ResponseFormat: openai.ChatCompletionNewParamsResponseFormatUnion{ OfJSONSchema: \u0026openai.ResponseFormatJSONSchemaParam{ JSONSchema: openai.ResponseFormatJSONSchemaJSONSchemaParam{ Name: \"product_review\", Schema: flatSchema, Strict: openai.Bool(true), }, }, }, }) // Validate the response (even with strict mode, validate anyway) validator := godantic.NewValidator[ProductReview]() review, errs := validator.Unmarshal([]byte(completion.Choices[0].Message.Content)) if len(errs) \u003e 0 { // Handle validation errors } Pydantic to Godantic Cheatsheet Pydantic Godantic class Model(BaseModel) type Model struct + godantic.NewValidator[Model]() @field_validator godantic.Validate(func) Field(ge=1, le=5) godantic.Min(1), godantic.Max(5) Field(min_length=1) godantic.MinLen(1) EmailStr godantic.Email() Optional[T] = None *T (pointer) Field(default=...) godantic.Default[T](value) List[T] with min_items godantic.MinItems[T](n) Union[A, B] godantic.Union[any](\"string\", A{}, B{}) Discriminator(\"type\") godantic.DiscriminatedUnion[T](\"type\", map) model.model_json_schema() schema.NewGenerator[T]().GenerateFlattened() Streaming Partial JSON For parsing incomplete JSON as it streams from LLMs, see Streaming Partial JSON from LLMs in Go.\nTry It go get github.com/deepankarm/godantic Working examples:\nOpenAI Structured Output Gemini Structured Output One struct definition, one source of truth — for what the LLM should produce and what your code will accept.\n","wordCount":"990","inLanguage":"en","datePublished":"2026-01-12T14:00:00+05:30","dateModified":"2026-01-12T14:00:00+05:30","author":{"@type":"Person","name":"Deepankar Mahapatro"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://deepankarm.github.io/posts/pydantic-for-go-validating-llm-outputs-with-godantic/"},"publisher":{"@type":"Organization","name":"deepankar.log","logo":{"@type":"ImageObject","url":"https://deepankarm.github.io/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://deepankarm.github.io/ accesskey=h title="deepankar.log (Alt + H)">deepankar.log</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://deepankarm.github.io/ title=Home><span>Home</span></a></li><li><a href=https://deepankarm.github.io/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://deepankarm.github.io/about/ title=About><span>About</span></a></li><li><a href=https://github.com/deepankarm title=GitHub><span>GitHub</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://www.linkedin.com/in/deepankar-mahapatro/ title=LinkedIn><span>LinkedIn</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Pydantic for Go: Validating LLM Outputs with godantic</h1><div class=post-description>Schema generation and runtime validation for structured LLM outputs in Go, using godantic</div><div class=post-meta><span title='2026-01-12 14:00:00 +0530 +0530'>January 12, 2026</span>&nbsp;·&nbsp;<span>5 min</span>&nbsp;·&nbsp;<span>Deepankar Mahapatro</span></div></header><div class=post-content><h2 id=the-problem>The Problem<a hidden class=anchor aria-hidden=true href=#the-problem>#</a></h2><p>LLMs hallucinate. They return wrong types, invalid values, and malformed data. A rating meant to be 1-5 comes back as 10. An email field contains &ldquo;not provided&rdquo;. A required field is missing entirely.</p><p>In Python, <a href=https://docs.pydantic.dev/>Pydantic</a> is the standard solution - define a model, validate the output, catch errors before they crash your app. But what about Go?</p><h2 id=why-existing-go-libraries-dont-cut-it>Why Existing Go Libraries Don&rsquo;t Cut It<a hidden class=anchor aria-hidden=true href=#why-existing-go-libraries-dont-cut-it>#</a></h2><p>Go has validation libraries. It has JSON schema libraries. But none of them solve the LLM output problem end-to-end.</p><p><strong>Struct tag validators</strong> like <a href=https://github.com/go-playground/validator><code>go-playground/validator</code></a> handle runtime validation, but through string-based struct tags (<code>validate:"required,email,min=1"</code>). These are invisible to your IDE, impossible to unit test in isolation, and don&rsquo;t generate schemas. You validate <em>after</em> the fact but can&rsquo;t tell the LLM what shape to produce.</p><p><strong>JSON schema libraries</strong> like <a href=https://github.com/invopop/jsonschema><code>invopop/jsonschema</code></a> generate schemas from structs, but don&rsquo;t validate. You can describe what you want, but can&rsquo;t enforce it when the response arrives.</p><p><strong>The missing piece is unification.</strong> Pydantic&rsquo;s power comes from one model definition that drives schema generation <em>and</em> validation <em>and</em> serialization. Define <code>Field(ge=1, le=5)</code> once - Pydantic generates the JSON schema for your LLM API call, then validates the response against the same constraints. In Go, you&rsquo;d need to wire together separate libraries, keep constraints in sync manually, and handle LLM-specific schema quirks (like flattening <code>$ref</code>s for OpenAI) yourself.</p><p><strong>Go has no union types.</strong> LLM responses are often polymorphic - a tool call returns either a <code>SuccessResponse</code> or an <code>ErrorResponse</code>, an input is either <code>TextInput</code> or <code>ImageInput</code>. Python handles this naturally with <code>Union[SuccessResponse, ErrorResponse]</code> and Pydantic&rsquo;s discriminated unions route to the right type based on a field value. Go&rsquo;s type system has no equivalent. You end up with <code>interface{}</code> fields, manual type switches, or separate endpoints - none of which produce correct <code>anyOf</code>/<code>oneOf</code> JSON schemas for the LLM.</p><p>There&rsquo;s also nothing in Go for <strong>parsing partial JSON from streaming LLM responses</strong> - a common need when building real-time UIs.</p><h2 id=godantic>godantic<a hidden class=anchor aria-hidden=true href=#godantic>#</a></h2><p><a href=https://github.com/deepankarm/godantic>godantic</a> fills this gap. One struct definition with <code>Field{Name}()</code> methods gives you:</p><ul><li><strong>Runtime validation</strong> with typed, testable constraints (no struct tags)</li><li><strong>JSON schema generation</strong> with LLM-specific transforms (<code>TransformForOpenAI()</code>, <code>TransformForGemini()</code>)</li><li><strong>Validated marshaling/unmarshaling</strong> in a single call</li><li><strong>Discriminated unions</strong> for polymorphic LLM responses</li><li><strong><a href=/posts/streaming-partial-json-llm/>Streaming partial JSON parsing</a></strong> for real-time output</li><li><strong>Lifecycle hooks</strong> (<code>BeforeValidate</code>, <code>AfterValidate</code>) for data transformation</li></ul><p>This post shows common patterns for validating LLM outputs with godantic.</p><hr><h2 id=basic-validation>Basic Validation<a hidden class=anchor aria-hidden=true href=#basic-validation>#</a></h2><p>Define a struct and add <code>Field{Name}()</code> methods to specify constraints:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#e06c75>ContactInfo</span> <span style=color:#c678dd>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Name</span>    <span style=color:#e5c07b>string</span>  <span style=color:#98c379>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Email</span>   <span style=color:#e5c07b>string</span>  <span style=color:#98c379>`json:&#34;email&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Phone</span>   <span style=color:#e5c07b>string</span>  <span style=color:#98c379>`json:&#34;phone&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Company</span> <span style=color:#56b6c2>*</span><span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;company,omitempty&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>func</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>ContactInfo</span>) <span style=color:#61afef;font-weight:700>FieldName</span>() <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>FieldOptions</span>[<span style=color:#e5c07b>string</span>] {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Field</span>(
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Required</span>[<span style=color:#e5c07b>string</span>](),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>MinLen</span>(<span style=color:#d19a66>1</span>),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Description</span>[<span style=color:#e5c07b>string</span>](<span style=color:#98c379>&#34;Contact&#39;s full name&#34;</span>),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>func</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>ContactInfo</span>) <span style=color:#61afef;font-weight:700>FieldEmail</span>() <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>FieldOptions</span>[<span style=color:#e5c07b>string</span>] {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Field</span>(
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Required</span>[<span style=color:#e5c07b>string</span>](),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Email</span>(),  <span style=color:#7f848e>// Built-in email validation</span>
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Description</span>[<span style=color:#e5c07b>string</span>](<span style=color:#98c379>&#34;Contact&#39;s email address&#34;</span>),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Validate LLM output:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#e06c75>validator</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>NewValidator</span>[<span style=color:#e06c75>ContactInfo</span>]()
</span></span><span style=display:flex><span><span style=color:#e06c75>contact</span>, <span style=color:#e06c75>errs</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>validator</span>.<span style=color:#61afef;font-weight:700>Unmarshal</span>([]<span style=color:#e5c07b>byte</span>(<span style=color:#e06c75>llmResponse</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>if</span> <span style=color:#e5c07b>len</span>(<span style=color:#e06c75>errs</span>) &gt; <span style=color:#d19a66>0</span> {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>for</span> <span style=color:#e06c75>_</span>, <span style=color:#e06c75>e</span> <span style=color:#56b6c2>:=</span> <span style=color:#c678dd>range</span> <span style=color:#e06c75>errs</span> {
</span></span><span style=display:flex><span>        <span style=color:#e06c75>fmt</span>.<span style=color:#61afef;font-weight:700>Printf</span>(<span style=color:#98c379>&#34;%v: %s\n&#34;</span>, <span style=color:#e06c75>e</span>.<span style=color:#e06c75>Loc</span>, <span style=color:#e06c75>e</span>.<span style=color:#e06c75>Message</span>)
</span></span><span style=display:flex><span>        <span style=color:#7f848e>// [Email]: value does not match pattern ^[a-zA-Z0-9._%+-]+@...</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=numeric-constraints>Numeric Constraints<a hidden class=anchor aria-hidden=true href=#numeric-constraints>#</a></h2><p>Constrain numeric values with <code>Min</code>, <code>Max</code>, <code>ExclusiveMin</code>, <code>ExclusiveMax</code>:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#e06c75>ProductReview</span> <span style=color:#c678dd>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ProductName</span> <span style=color:#e5c07b>string</span>   <span style=color:#98c379>`json:&#34;product_name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Rating</span>      <span style=color:#e5c07b>int</span>      <span style=color:#98c379>`json:&#34;rating&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Pros</span>        []<span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;pros&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Cons</span>        []<span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;cons&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Summary</span>     <span style=color:#e5c07b>string</span>   <span style=color:#98c379>`json:&#34;summary&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>func</span> (<span style=color:#e06c75>p</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>ProductReview</span>) <span style=color:#61afef;font-weight:700>FieldRating</span>() <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>FieldOptions</span>[<span style=color:#e5c07b>int</span>] {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Field</span>(
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Required</span>[<span style=color:#e5c07b>int</span>](),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Min</span>(<span style=color:#d19a66>1</span>),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Max</span>(<span style=color:#d19a66>5</span>),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Description</span>[<span style=color:#e5c07b>int</span>](<span style=color:#98c379>&#34;Rating from 1 (worst) to 5 (best)&#34;</span>),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>func</span> (<span style=color:#e06c75>p</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>ProductReview</span>) <span style=color:#61afef;font-weight:700>FieldPros</span>() <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>FieldOptions</span>[[]<span style=color:#e5c07b>string</span>] {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Field</span>(
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Required</span>[[]<span style=color:#e5c07b>string</span>](),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>MinItems</span>[<span style=color:#e5c07b>string</span>](<span style=color:#d19a66>1</span>),  <span style=color:#7f848e>// At least one pro</span>
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Description</span>[[]<span style=color:#e5c07b>string</span>](<span style=color:#98c379>&#34;List of positive aspects&#34;</span>),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>When the LLM returns <code>"rating": 10</code>:</p><pre tabindex=0><code>[Rating]: value must be &lt;= 5
</code></pre><hr><h2 id=custom-validators>Custom Validators<a hidden class=anchor aria-hidden=true href=#custom-validators>#</a></h2><p>Adding to our <code>ContactInfo</code> from earlier, custom validation logic with <code>godantic.Validate()</code>:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#c678dd>func</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>ContactInfo</span>) <span style=color:#61afef;font-weight:700>FieldPhone</span>() <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>FieldOptions</span>[<span style=color:#e5c07b>string</span>] {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Field</span>(
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Required</span>[<span style=color:#e5c07b>string</span>](),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Validate</span>(<span style=color:#c678dd>func</span>(<span style=color:#e06c75>phone</span> <span style=color:#e5c07b>string</span>) <span style=color:#e5c07b>error</span> {
</span></span><span style=display:flex><span>            <span style=color:#7f848e>// Strip formatting: (555) 123-4567 -&gt; 5551234567</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>re</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>regexp</span>.<span style=color:#61afef;font-weight:700>MustCompile</span>(<span style=color:#98c379>`\D`</span>)
</span></span><span style=display:flex><span>            <span style=color:#e06c75>digits</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>re</span>.<span style=color:#61afef;font-weight:700>ReplaceAllString</span>(<span style=color:#e06c75>phone</span>, <span style=color:#98c379>&#34;&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span> <span style=color:#e5c07b>len</span>(<span style=color:#e06c75>digits</span>) &lt; <span style=color:#d19a66>10</span> {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>return</span> <span style=color:#e06c75>fmt</span>.<span style=color:#61afef;font-weight:700>Errorf</span>(<span style=color:#98c379>&#34;phone must have at least 10 digits, got %d&#34;</span>, <span style=color:#e5c07b>len</span>(<span style=color:#e06c75>digits</span>))
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>return</span> <span style=color:#e5c07b>nil</span>
</span></span><span style=display:flex><span>        }),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Output:</p><pre tabindex=0><code>[Phone]: phone must have at least 10 digits, got 3
</code></pre><hr><h2 id=nested-models>Nested Models<a hidden class=anchor aria-hidden=true href=#nested-models>#</a></h2><p>Nested structs are validated automatically:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#e06c75>Specification</span> <span style=color:#c678dd>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Name</span>  <span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Value</span> <span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;value&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#e06c75>Review</span> <span style=color:#c678dd>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ReviewerName</span> <span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;reviewer_name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Rating</span>       <span style=color:#e5c07b>int</span>    <span style=color:#98c379>`json:&#34;rating&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Comment</span>      <span style=color:#e5c07b>string</span> <span style=color:#98c379>`json:&#34;comment&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>type</span> <span style=color:#e06c75>Product</span> <span style=color:#c678dd>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Name</span>           <span style=color:#e5c07b>string</span>          <span style=color:#98c379>`json:&#34;name&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Price</span>          <span style=color:#e5c07b>float64</span>         <span style=color:#98c379>`json:&#34;price&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Specifications</span> []<span style=color:#e06c75>Specification</span> <span style=color:#98c379>`json:&#34;specifications&#34;`</span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Reviews</span>        []<span style=color:#e06c75>Review</span>        <span style=color:#98c379>`json:&#34;reviews&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#c678dd>func</span> (<span style=color:#e06c75>r</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>Review</span>) <span style=color:#61afef;font-weight:700>FieldRating</span>() <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>FieldOptions</span>[<span style=color:#e5c07b>int</span>] {
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Field</span>(
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>Required</span>[<span style=color:#e5c07b>int</span>](),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Min</span>(<span style=color:#d19a66>1</span>),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>godantic</span>.<span style=color:#61afef;font-weight:700>Max</span>(<span style=color:#d19a66>5</span>),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If a nested review has an invalid rating:</p><pre tabindex=0><code>[Reviews [0] Rating]: value must be &lt;= 5
</code></pre><hr><h2 id=schema-generation-for-llm-apis>Schema Generation for LLM APIs<a hidden class=anchor aria-hidden=true href=#schema-generation-for-llm-apis>#</a></h2><p>Generate JSON schemas for OpenAI, Gemini, or Anthropic structured outputs using <code>godantic/schema</code>:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#e06c75>schemaGen</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>schema</span>.<span style=color:#e06c75>NewGenerator</span>[<span style=color:#e06c75>ProductReview</span>]()
</span></span><span style=display:flex><span><span style=color:#e06c75>flatSchema</span>, <span style=color:#e06c75>err</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>schemaGen</span>.<span style=color:#61afef;font-weight:700>GenerateFlattened</span>()
</span></span></code></pre></div><p>Output:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;type&#34;</span>: <span style=color:#98c379>&#34;object&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;properties&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;rating&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;type&#34;</span>: <span style=color:#98c379>&#34;integer&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;minimum&#34;</span>: <span style=color:#d19a66>1</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;maximum&#34;</span>: <span style=color:#d19a66>5</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;description&#34;</span>: <span style=color:#98c379>&#34;Rating from 1 (worst) to 5 (best)&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#e06c75>&#34;pros&#34;</span>: {
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;type&#34;</span>: <span style=color:#98c379>&#34;array&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;items&#34;</span>: {<span style=color:#e06c75>&#34;type&#34;</span>: <span style=color:#98c379>&#34;string&#34;</span>},
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;minItems&#34;</span>: <span style=color:#d19a66>1</span>,
</span></span><span style=display:flex><span>      <span style=color:#e06c75>&#34;description&#34;</span>: <span style=color:#98c379>&#34;List of positive aspects&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#e06c75>&#34;required&#34;</span>: [<span style=color:#98c379>&#34;product_name&#34;</span>, <span style=color:#98c379>&#34;rating&#34;</span>, <span style=color:#98c379>&#34;pros&#34;</span>, <span style=color:#98c379>&#34;cons&#34;</span>, <span style=color:#98c379>&#34;summary&#34;</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The same struct definition drives both validation and schema generation.</p><hr><h2 id=openai-structured-outputs>OpenAI Structured Outputs<a hidden class=anchor aria-hidden=true href=#openai-structured-outputs>#</a></h2><p>Use the generated schema with OpenAI&rsquo;s structured output API (using <a href=https://github.com/openai/openai-go><code>openai-go</code></a>):</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#7f848e>// Generate schema</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>schemaGen</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>schema</span>.<span style=color:#e06c75>NewGenerator</span>[<span style=color:#e06c75>ProductReview</span>]()
</span></span><span style=display:flex><span><span style=color:#e06c75>flatSchema</span>, <span style=color:#e06c75>err</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>schemaGen</span>.<span style=color:#61afef;font-weight:700>GenerateFlattened</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e>// Call OpenAI with structured output</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>completion</span>, <span style=color:#e06c75>_</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>client</span>.<span style=color:#e06c75>Chat</span>.<span style=color:#e06c75>Completions</span>.<span style=color:#61afef;font-weight:700>New</span>(<span style=color:#e06c75>ctx</span>, <span style=color:#e06c75>openai</span>.<span style=color:#e06c75>ChatCompletionNewParams</span>{
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Messages</span>: []<span style=color:#e06c75>openai</span>.<span style=color:#e06c75>ChatCompletionMessageParamUnion</span>{
</span></span><span style=display:flex><span>        <span style=color:#e06c75>openai</span>.<span style=color:#61afef;font-weight:700>SystemMessage</span>(<span style=color:#98c379>&#34;Extract a structured product review.&#34;</span>),
</span></span><span style=display:flex><span>        <span style=color:#e06c75>openai</span>.<span style=color:#61afef;font-weight:700>UserMessage</span>(<span style=color:#e06c75>reviewText</span>),
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Model</span>: <span style=color:#e06c75>openai</span>.<span style=color:#e06c75>ChatModelGPT4o2024_08_06</span>,
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ResponseFormat</span>: <span style=color:#e06c75>openai</span>.<span style=color:#e06c75>ChatCompletionNewParamsResponseFormatUnion</span>{
</span></span><span style=display:flex><span>        <span style=color:#e06c75>OfJSONSchema</span>: <span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>openai</span>.<span style=color:#e06c75>ResponseFormatJSONSchemaParam</span>{
</span></span><span style=display:flex><span>            <span style=color:#e06c75>JSONSchema</span>: <span style=color:#e06c75>openai</span>.<span style=color:#e06c75>ResponseFormatJSONSchemaJSONSchemaParam</span>{
</span></span><span style=display:flex><span>                <span style=color:#e06c75>Name</span>:   <span style=color:#98c379>&#34;product_review&#34;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e06c75>Schema</span>: <span style=color:#e06c75>flatSchema</span>,
</span></span><span style=display:flex><span>                <span style=color:#e06c75>Strict</span>: <span style=color:#e06c75>openai</span>.<span style=color:#61afef;font-weight:700>Bool</span>(<span style=color:#e5c07b>true</span>),
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#7f848e>// Validate the response (even with strict mode, validate anyway)</span>
</span></span><span style=display:flex><span><span style=color:#e06c75>validator</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>godantic</span>.<span style=color:#e06c75>NewValidator</span>[<span style=color:#e06c75>ProductReview</span>]()
</span></span><span style=display:flex><span><span style=color:#e06c75>review</span>, <span style=color:#e06c75>errs</span> <span style=color:#56b6c2>:=</span> <span style=color:#e06c75>validator</span>.<span style=color:#61afef;font-weight:700>Unmarshal</span>([]<span style=color:#e5c07b>byte</span>(<span style=color:#e06c75>completion</span>.<span style=color:#e06c75>Choices</span>[<span style=color:#d19a66>0</span>].<span style=color:#e06c75>Message</span>.<span style=color:#e06c75>Content</span>))
</span></span><span style=display:flex><span><span style=color:#c678dd>if</span> <span style=color:#e5c07b>len</span>(<span style=color:#e06c75>errs</span>) &gt; <span style=color:#d19a66>0</span> {
</span></span><span style=display:flex><span>    <span style=color:#7f848e>// Handle validation errors</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=pydantic-to-godantic-cheatsheet>Pydantic to Godantic Cheatsheet<a hidden class=anchor aria-hidden=true href=#pydantic-to-godantic-cheatsheet>#</a></h2><table><thead><tr><th>Pydantic</th><th>Godantic</th></tr></thead><tbody><tr><td><code>class Model(BaseModel)</code></td><td><code>type Model struct</code> + <code>godantic.NewValidator[Model]()</code></td></tr><tr><td><code>@field_validator</code></td><td><code>godantic.Validate(func)</code></td></tr><tr><td><code>Field(ge=1, le=5)</code></td><td><code>godantic.Min(1), godantic.Max(5)</code></td></tr><tr><td><code>Field(min_length=1)</code></td><td><code>godantic.MinLen(1)</code></td></tr><tr><td><code>EmailStr</code></td><td><code>godantic.Email()</code></td></tr><tr><td><code>Optional[T] = None</code></td><td><code>*T</code> (pointer)</td></tr><tr><td><code>Field(default=...)</code></td><td><code>godantic.Default[T](value)</code></td></tr><tr><td><code>List[T]</code> with <code>min_items</code></td><td><code>godantic.MinItems[T](n)</code></td></tr><tr><td><code>Union[A, B]</code></td><td><code>godantic.Union[any]("string", A{}, B{})</code></td></tr><tr><td><code>Discriminator("type")</code></td><td><code>godantic.DiscriminatedUnion[T]("type", map)</code></td></tr><tr><td><code>model.model_json_schema()</code></td><td><code>schema.NewGenerator[T]().GenerateFlattened()</code></td></tr></tbody></table><hr><h2 id=streaming-partial-json>Streaming Partial JSON<a hidden class=anchor aria-hidden=true href=#streaming-partial-json>#</a></h2><p>For parsing incomplete JSON as it streams from LLMs, see <a href=/posts/streaming-partial-json-llm/>Streaming Partial JSON from LLMs in Go</a>.</p><hr><h2 id=try-it>Try It<a hidden class=anchor aria-hidden=true href=#try-it>#</a></h2><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-bash data-lang=bash><span style=display:flex><span>go get github.com/deepankarm/godantic
</span></span></code></pre></div><p>Working examples:</p><ul><li><a href=https://github.com/deepankarm/godantic/tree/main/examples/openai-structured-output>OpenAI Structured Output</a></li><li><a href=https://github.com/deepankarm/godantic/tree/main/examples/gemini-structured-output>Gemini Structured Output</a></li></ul><p>One struct definition, one source of truth — for what the LLM should produce and what your code will accept.</p><hr></div><footer class=post-footer><ul class=post-tags><li><a href=https://deepankarm.github.io/tags/go/>go</a></li><li><a href=https://deepankarm.github.io/tags/llm/>LLM</a></li><li><a href=https://deepankarm.github.io/tags/validation/>validation</a></li><li><a href=https://deepankarm.github.io/tags/godantic/>godantic</a></li><li><a href=https://deepankarm.github.io/tags/openai/>OpenAI</a></li><li><a href=https://deepankarm.github.io/tags/structured-output/>structured output</a></li></ul><nav class=paginav><a class=prev href=https://deepankarm.github.io/posts/pep-723-inline-script-metadata/><span class=title>« Prev</span><br><span>TIL: Inline dependencies in Python scripts</span>
</a><a class=next href=https://deepankarm.github.io/posts/detecting-event-loop-blocking-in-asyncio/><span class=title>Next »</span><br><span>Detecting event loop blocking in asyncio</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://deepankarm.github.io/>deepankar.log</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>